<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover">
<title>MiMi üíñ System Message</title>

<script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.9.3/dist/confetti.browser.min.js"></script>

<style>
:root{
  --pink:#ff2f7b;
  --bg1:#ffd6ea;
  --bg2:#fff3f9;
}

*{box-sizing:border-box}

body{
  margin:0;
  min-height:100svh;
  display:grid;
  place-items:center;
  background:radial-gradient(circle at top,var(--bg2),var(--bg1));
  font-family:system-ui,-apple-system,sans-serif;
  overflow:hidden;
  padding:14px;
}

canvas{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:999;
}

.card{
  width:min(720px,96vw);
  padding:28px 22px 34px;
  background:#ffffffee;
  backdrop-filter:blur(12px);
  border-radius:26px;
  box-shadow:0 30px 90px rgba(0,0,0,.25);
  text-align:center;
}

h1{
  font-size:clamp(24px,4.5vw,46px);
  margin:10px 0;
}

p{
  font-size:16px;
  opacity:.85;
  min-height:48px;
}

.zone{
  position:relative;
  width:min(520px,100%);
  height:170px;
  margin:18px auto;
}

button{
  position:absolute;
  top:50%;
  transform:translateY(-50%);
  padding:16px 28px;
  font-size:18px;
  font-weight:900;
  border-radius:999px;
  border:none;
  cursor:pointer;
  box-shadow:0 14px 30px rgba(0,0,0,.2);
}

#yes{
  left:16%;
  background:var(--pink);
  color:#fff;
}

#no{
  left:62%;
  background:#e5e7eb;
}

.log{
  font-size:13px;
  opacity:.6;
  min-height:22px;
}

.hidden{display:none}

audio{display:none}
</style>
</head>

<body>
<canvas id="confetti"></canvas>

<audio id="music" loop>
  <source src="https://assets.mixkit.co/music/preview/mixkit-romantic-piano-loop-779.mp3">
</audio>

<main class="card">
  <h1 id="title">System Initializing‚Ä¶</h1>
  <p id="dialogue"></p>

  <div class="zone" id="zone">
    <button id="yes">YES üíñ</button>
    <button id="no">No ‚ùå</button>
  </div>

  <div class="log" id="log"></div>
</main>

<script>
const title=document.getElementById("title");
const dialogue=document.getElementById("dialogue");
const yes=document.getElementById("yes");
const no=document.getElementById("no");
const zone=document.getElementById("zone");
const log=document.getElementById("log");
const music=document.getElementById("music");
const canvas=document.getElementById("confetti");

const confettiInstance=confetti.create(canvas,{resize:true,useWorker:true});

const stages=[
  "Hello MiMi üíï",
  "This system was designed for ONE decision.",
  "We tested every possibility.",
  "Except‚Ä¶ you pressing No.",
  "That was not expected.",
  "Please reconsider üòê"
];

let stage=0;
let typing=false;

function type(text,cb){
  typing=true;
  dialogue.textContent="";
  let i=0;
  const t=setInterval(()=>{
    dialogue.textContent+=text[i++];
    if(i>=text.length){
      clearInterval(t);
      typing=false;
      cb&&cb();
    }
  },35);
}

function nextStage(){
  if(stage<stages.length){
    type(stages[stage++]);
  }
}

nextStage();
setTimeout(nextStage,1200);
setTimeout(nextStage,2600);

let noCount=0;
let yesScale=1;

/* NO CLICK DRAMA */
no.addEventListener("click",()=>{
  if(typing) return;

  noCount++;
  navigator.vibrate?.(60);

  if(noCount===1){
    type("ERROR: Emotional conflict detected ‚ö†Ô∏è");
    log.textContent="Attempting recovery‚Ä¶";
  }
  else if(noCount===2){
    type("System unstable‚Ä¶ MiMi please don‚Äôt do this.");
    no.disabled=true;
    log.textContent="No button temporarily disabled.";
    setTimeout(()=>{no.disabled=false;log.textContent="No button restored.";},2000);
  }
  else if(noCount===3){
    type("Last warning. Heart integrity at risk üíî");
    countdown();
  }
  else{
    forceYes();
  }
});

/* COUNTDOWN PRESSURE */
function countdown(){
  let n=5;
  log.textContent="Decision required in "+n;
  const c=setInterval(()=>{
    n--;
    log.textContent="Decision required in "+n;
    if(n===0){
      clearInterval(c);
      forceYes();
    }
  },1000);
}

/* YES GROWS */
zone.addEventListener("pointermove",e=>{
  const b=no.getBoundingClientRect();
  if(Math.hypot((b.left+b.width/2)-e.clientX,(b.top+b.height/2)-e.clientY)<140){
    no.style.left=Math.random()*(zone.clientWidth-80)+"px";
    no.style.top=Math.random()*(zone.clientHeight-40)+"px";
    yesScale=Math.min(3,yesScale+.12);
    yes.style.transform=`translateY(-50%) scale(${yesScale})`;
  }
});

/* YES CLICK */
yes.addEventListener("click",()=>{
  music.play().catch(()=>{});
  endGame();
});

/* FORCED END (FUNNY) */
function forceYes(){
  type("Decision overridden. Choosing YES for MiMi üíñ");
  setTimeout(endGame,1200);
}

function endGame(){
  title.textContent="üíñ SYSTEM SUCCESS üíñ";
  dialogue.innerHTML="MiMi‚Ä¶<br>This wasn‚Äôt code.<br>This was me choosing you.";
  zone.classList.add("hidden");
  log.textContent="Memory saved forever.";

  confettiInstance({
    particleCount:400,
    spread:160,
    startVelocity:60,
    origin:{x:.5,y:.6}
  });
}
</script>
</body>
</html>


